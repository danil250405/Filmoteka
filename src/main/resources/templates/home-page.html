<!DOCTYPE html>
<html lang="ru en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Movie Library</title>



    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="../static/css/styleHome.css" rel="stylesheet" />
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">-->


</head>
<body><nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="/home-page">Filmoteka</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item">
                <!-- ваше содержимое -->
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Movies</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Cartons</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Serials</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">About</a>
            </li>
        </ul>


<!--        if user guest-->
        <th:block th:if="${userRole == 'guest'}">
        <ul class="navbar-nav" style="margin-left: auto">
            <li class="nav-item">
                <a class="nav-link" href="/login">
                    <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" class="mr-2 spark-registration">
                        <path d="M256 112c-48.6 0-88 39.4-88 88s39.4 88 88 88 88-39.4 88-88-39.4-88-88-88zm0 128c-22.06 0-40-17.95-40-40 0-22.1 17.9-40 40-40s40 17.94 40 40c0 22.1-17.9 40-40 40zm0-240C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0zm0 464c-46.73 0-89.76-15.68-124.5-41.79C148.8 389 182.4 368 220.2 368h71.69c37.75 0 71.31 21.01 88.68 54.21C345.8 448.3 302.7 464 256 464zm160.2-75.5c-27-42.2-73-68.5-124.4-68.5h-71.6c-51.36 0-97.35 26.25-124.4 68.48C65.96 352.5 48 306.3 48 256c0-114.7 93.31-208 208-208s208 93.31 208 208c0 50.3-18 96.5-47.8 132.5z" fill="#e8e8e8" class="fill-000000"></path>

                    </svg>
                    Log In
                </a>
            </li>
        </ul>
        </th:block>
        <!--        if user admin-->
        <th:block th:if="${userRole == 'admin'}">
            <ul class="navbar-nav" style="margin-left: auto">
                <li class="nav-item">
                    <a class="nav-link" href="/logout">
                        <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" class="mr-2 spark-registration">
                            <path d="M256 112c-48.6 0-88 39.4-88 88s39.4 88 88 88 88-39.4 88-88-39.4-88-88-88zm0 128c-22.06 0-40-17.95-40-40 0-22.1 17.9-40 40-40s40 17.94 40 40c0 22.1-17.9 40-40 40zm0-240C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0zm0 464c-46.73 0-89.76-15.68-124.5-41.79C148.8 389 182.4 368 220.2 368h71.69c37.75 0 71.31 21.01 88.68 54.21C345.8 448.3 302.7 464 256 464zm160.2-75.5c-27-42.2-73-68.5-124.4-68.5h-71.6c-51.36 0-97.35 26.25-124.4 68.48C65.96 352.5 48 306.3 48 256c0-114.7 93.31-208 208-208s208 93.31 208 208c0 50.3-18 96.5-47.8 132.5z" fill="#e8e8e8" class="fill-000000"></path>
                        </svg>
                        Log out
                    </a>
                </li>
            </ul>
        </th:block>

    </div>
</nav>


<form th:action="@{/home-page}" method="post">
    <div class="form-group">
        <label for="genre">Select Genre:</label>
        <select class="form-control" id="genre" name="genre">

            <option th:each="genre : ${genres}" th:value="${genre}" th:selected="${genre == selectedGenre}" th:text="${genre}"></option>
        </select>
        <label for="yearRange">Select Year Range:</label>
        <select class="form-control" id="yearRange" name="yearRange">

            <option th:each="range : ${yearRanges}" th:value="${range}" th:selected="${range == selectedYearRange}" th:text="${range}"></option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>



<div class="container my-5">
    <div class="row">
        <div class="col-lg-12">
            <h2 class="mb-4">Popular Movies</h2>
            <div class="row">
                <div class="col-md-3 mb-4" th:each="movie : ${movies}">
                    <div class="card">
                        <img th:src="${movie.previewUrlImg}" class="card-img-top" alt="Movie Poster">
                        <div class="card-body">
                            <h5 class="card-title" th:text="${movie.enName}">FilmName</h5>
                            <a href="#" class="btn btn-details btn-sm">
                                <i class="fas fa-info-circle"></i> Details
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        <!-- Ссылка на предыдущую страницу -->
        <li th:class="${currentPage == 1} ? 'page-item disabled' : 'page-item'">
            <a th:href="@{${baseUrl + (currentPage - 1)}}" class="page-link" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Prev</span>
            </a>
        </li>

        <!-- Ссылка на первую страницу -->
        <li th:if="${currentPage >= 4}" th:class="${currentPage == 1} ? 'page-item active' : 'page-item'">
            <a th:href="@{${baseUrl + 1}}" class="page-link">1</a>
        </li>

        <!-- Ссылка на страницу "..." -->
        <li th:if="${currentPage > 4}" class="page-item disabled">
            <a href="#" class="page-link">...</a>
        </li>

        <!-- Ссылки на страницы в диапазоне currentPage +/- 2 -->
        <li th:each="pageNum : ${#numbers.sequence(currentPage > 2 ? currentPage - 2 : 1, currentPage < totalPages - 2 ? currentPage + 2 : totalPages)}"
            th:class="${pageNum == currentPage} ? 'page-item active' : 'page-item'">
            <a th:href="@{${baseUrl + pageNum}}" class="page-link" th:text="${pageNum}"></a>
        </li>

        <!-- Ссылка на страницу "..." -->
        <li th:if="${currentPage < totalPages - 3}" class="page-item disabled">
            <a href="#" class="page-link">...</a>
        </li>

        <!-- Ссылка на последнюю страницу -->
        <li th:if="${currentPage < totalPages - 2}" th:class="${currentPage == totalPages} ? 'page-item active' : 'page-item'">
            <a th:href="@{${baseUrl + totalPages}}" class="page-link" th:text="${totalPages}"></a>
        </li>

        <!-- Ссылка на следующую страницу -->
        <li th:class="${currentPage == totalPages} ? 'page-item disabled' : 'page-item'">
            <a th:href="@{${baseUrl + (currentPage + 1)}}" class="page-link" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
            </a>
        </li>
    </ul>
</nav>

<footer class="bg-dark text-white">
    <div class="container">
        <p class="mb-0" >&copy; Filmoteka 2024</p>
    </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
