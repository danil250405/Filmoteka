<!DOCTYPE html>
<html lang="ru en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Filter Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="../static/css/styleMoviePage.css" rel="stylesheet" />
    <link rel="stylesheet" href="../../static/css/roots.css">
    <link rel="stylesheet" href="../../static/css/headersAndFootersStyle.css">


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>

<body >
<!--import header-->
<div th:replace="~{fragments/headerBase.html :: header}"></div>

<main>
    <section class="container hero-section">
        <div class="bg-gradient-hero">
            <div class="img-wrap-hero">
                <img class="bg-img-hero" th:src="${moviePage.backdrop}" alt="backdrop">
            </div>
            <h1 th:text="${moviePage.name}">Название фильма</h1>
            <p class="short-description" th:text="${moviePage.shortDescription}"></p>
            <div class="second-line-hero">
                <button type="submit" class="btn btn-primary btn-play" >
                    <svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M0.75 2.59479C0.75 0.930971 2.53383 -0.123757 3.9917 0.678068L17.4557 8.08328C18.9668 8.91436 18.9668 11.0856 17.4557 11.9167L3.9917 19.3219C2.53383 20.1238 0.75 19.069 0.75 17.4052V2.59479Z" fill="white"/>
                    </svg>
                    Play now
                </button>
                <button class="hero-possibility">
                    <svg viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 32 32">
                        <path d="M28 14H18V4a2 2 0 0 0-4 0v10H4a2 2 0 0 0 0 4h10v10a2 2 0 0 0 4 0V18h10a2 2 0 0 0 0-4z" fill="#ffffff" class="fill-000000"></path>
                    </svg>

                </button>
                <button class="hero-possibility">
                    <svg viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                        <g clip-rule="evenodd" fill="#ffffff" fill-rule="evenodd" class="fill-333333"><path d="M29.164 10.472c-1.25-.328-4.189-.324-8.488-.438.203-.938.25-1.784.25-3.286C20.926 3.16 18.312 0 16 0c-1.633 0-2.979 1.335-3 2.977-.022 2.014-.645 5.492-4 7.256-.246.13-.95.477-1.053.522L8 10.8c-.525-.453-1.253-.8-2-.8H3c-1.654 0-3 1.346-3 3v16c0 1.654 1.346 3 3 3h3c1.19 0 2.186-.719 2.668-1.727.012.004.033.01.047.012l.239.062.046.012c.576.143 1.685.408 4.055.953.508.116 3.192.688 5.972.688h5.467c1.666 0 2.867-.641 3.582-1.928.01-.02.24-.469.428-1.076a3.33 3.33 0 0 0 .023-1.76c1.074-.738 1.42-1.854 1.645-2.58.377-1.191.264-2.086.002-2.727.604-.57 1.119-1.439 1.336-2.766a3.757 3.757 0 0 0-.389-2.372c.566-.636.824-1.436.854-2.176l.012-.209c.007-.131.013-.212.013-.5 0-1.263-.875-2.874-2.836-3.434zM7 29a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V13a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v16zm22.977-14.465C29.957 15.029 29.75 16 28 16h-2a.5.5 0 1 0 0 1h1.938c1.5 0 1.697 1.244 1.6 1.844-.124.746-.474 2.156-2.163 2.156H25a.499.499 0 1 0 0 1h1.969c1.688 0 1.539 1.287 1.297 2.055-.319 1.009-.514 1.945-2.641 1.945h-1.631a.499.499 0 1 0 0 1h1.568c1.094 0 1.145 1.035 1.031 1.406-.125.406-.273.707-.279.721-.302.545-.789.873-1.82.873h-5.467c-2.746 0-5.47-.623-5.54-.639-4.154-.957-4.373-1.031-4.634-1.105 0 0-.846-.143-.846-.881L8 13.563c0-.469.299-.893.794-1.042.062-.024.146-.05.206-.075 4.568-1.892 5.959-6.04 6-9.446.006-.479.375-1 1-1 1.057 0 2.926 2.122 2.926 4.748 0 2.371-.096 2.781-.926 5.252 10 0 9.93.144 10.812.375 1.094.313 1.188 1.219 1.188 1.531 0 .343-.01.293-.023.629z"></path><path d="M4.5 26a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 4.5 26zm0 2c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5z"></path></g>
                    </svg>
                </button>
                <button class="hero-possibility">
                    <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                        <path d="M264 416.19a23.92 23.92 0 0 1-14.21-4.69l-.66-.51-91.46-75H88a24 24 0 0 1-24-24V200a24 24 0 0 1 24-24h69.65l91.46-75 .66-.51A24 24 0 0 1 288 119.83v272.34a24 24 0 0 1-24 24ZM352 336a16 16 0 0 1-14.29-23.18c9.49-18.9 14.3-38 14.3-56.82 0-19.36-4.66-37.92-14.25-56.73a16 16 0 0 1 28.5-14.54C378.2 208.16 384 231.47 384 256c0 23.83-6 47.78-17.7 71.18A16 16 0 0 1 352 336Z" fill="#ffffff" class="fill-000000"></path><path d="M400 384a16 16 0 0 1-13.87-24C405 327.05 416 299.45 416 256c0-44.12-10.94-71.52-29.83-103.95A16 16 0 0 1 413.83 136C434.92 172.16 448 204.88 448 256c0 50.36-13.06 83.24-34.12 120a16 16 0 0 1-13.88 8Z" fill="#ffffff" class="fill-000000"></path>
                    </svg>

                </button>
            </div>
        </div>
    </section>

    <section class="container main-section">
        <div class="left-side-containers">
            <div class="movie-page-section description-container">
                <h2>Description</h2>
                <p th:text="${moviePage.description}">Описание фильма</p>
            </div>
            <!--cast-->
            <div class="movie-page-section cast-container">
                <div class="navigation-cast">
                    <h2>Cast</h2>
                    <div>
                <button id="prevBtn">
                    <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                        <path d="M189.3 128.4 89 233.4c-6 5.8-9 13.7-9 22.4s3 16.5 9 22.4l100.3 105.4c11.9 12.5 31.3 12.5 43.2 0 11.9-12.5 11.9-32.7 0-45.2L184.4 288h217c16.9 0 30.6-14.3 30.6-32s-13.7-32-30.6-32h-217l48.2-50.4c11.9-12.5 11.9-32.7 0-45.2-12-12.5-31.3-12.5-43.3 0z" fill="#fff"/>
                    </svg>
                </button>
                <button id="nextBtn">
                    <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                        <path d="m322.7 128.4 100.3 105c6 5.8 9 13.7 9 22.4s-3 16.5-9 22.4L322.7 383.6c-11.9 12.5-31.3 12.5-43.2 0-11.9-12.5-11.9-32.7 0-45.2l48.2-50.4h-217c-17 0-30.7-14.3-30.7-32s13.7-32 30.6-32h217l-48.2-50.4c-11.9-12.5-11.9-32.7 0-45.2 12-12.5 31.3-12.5 43.3 0z" fill="#fff"/>
                    </svg>
                </button>
                    </div>
                </div>
                <ul class="cast-list">

                    <li class="cast-item" th:each="manFromMovie : ${moviePage.manFromMovieList}">

                        <img th:src="${manFromMovie.photo}" alt="dude photo">
                        <p th:text="${manFromMovie.name}"></p>
                        <p th:text="${manFromMovie.profession}"></p>

                    </li>
                </ul>
            </div>
            <!--reviews container-->
            <div class="movie-page-section reviews-container">
                <div class="wrap-upper-reviews">
                <h2>Reviews</h2>
                <div th:if="${userRole == 'admin'}">
                    <button class="addReviewButton dark-btn">
                        <span class="plus-review">+</span>
                        <span class="add-review-text">Add Your Review</span>
                    </button>
                    <p  style="display: none">You can't add review. <a href="/login">Log in</a></p>
                </div>
                <div th:if="${userRole == 'guest'}">
                    <button style="display: none" class="addReviewButton">Add Your Review</button>
                    <p>You can't add review. <a href="/login">Log in</a></p>
                </div>
                </div>
                <!--review modal-->
                <div id="myModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Add Your Review</h2>
                            <span class="close">&times;</span>
                        </div>
                        <form id="reviewForm"
                              method="post"
                              role="form"
                              th:action="@{/add-review}">
                            <input type="hidden" id="movieId" name="movieId" th:value="${moviePage.id}">
                            <label for="reviewText">Your Review:</label><br>
                            <textarea id="reviewText" name="reviewText" rows="4" cols="50"></textarea><br>
                            <div class="down-wrap-modal">
                                <div>
                                    <label for="reviewScore">Your Score(1-10):</label><br>
                                    <input type="number" id="reviewScore" name="reviewScore" min="1" max="10" required><br>
                                </div>
                                <button type="submit" class="btn btn-primary">Submit Review</button>
                            </div>
                        </form>
                    </div>
                </div>
                <!--down info review-->
                <div class="down-wrap-reviews">
                <ul class="review-list">
                    <li th:each="review : ${reviewList}" class="review-item">
                        <div class="wrap-upper-review">
                            <div>
                                <div class="user-name-review" th:text="${review.user.name}"></div>
                                <div class="username-review"><a href="#"><span>@</span><span  th:text="${review.user.username}"></span></a></div>
                            </div>
                        <div class="rating-wrap">
                            <div class="rating-body">
                                <div class="rating__active"></div>
                                <div class="rating__items">
                                    <input type="radio" class="rating__item" value="1" name="rating">
                                    <input type="radio" class="rating__item" value="2" name="rating">
                                    <input type="radio" class="rating__item" value="3" name="rating">
                                    <input type="radio" class="rating__item" value="4" name="rating">
                                    <input type="radio" class="rating__item" value="5" name="rating">
                                </div>
                            </div>
                            <div class="rating__value" th:text="${review.reviewScore}"></div>
                        </div>
                        </div>
                        <p class="review-text" th:text="${review.reviewText}"></p>
                    </li>

                </ul>
                    <div th:if="${reviewList == null}">
                        <p class="reviews-is-null-text">There are no reviews for this film yet, you can be the first!</p>
                    </div>
                    <div th:if="${reviewListSize > 2}">
                        <div class="review-pagination">
                            <button class="prevBtn-reviews">
                                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M189.3 128.4 89 233.4c-6 5.8-9 13.7-9 22.4s3 16.5 9 22.4l100.3 105.4c11.9 12.5 31.3 12.5 43.2 0 11.9-12.5 11.9-32.7 0-45.2L184.4 288h217c16.9 0 30.6-14.3 30.6-32s-13.7-32-30.6-32h-217l48.2-50.4c11.9-12.5 11.9-32.7 0-45.2-12-12.5-31.3-12.5-43.3 0z" fill="#fff"/>
                                </svg>
                            </button>
                            <button class="nextBtn-reviews">
                                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                                    <path d="m322.7 128.4 100.3 105c6 5.8 9 13.7 9 22.4s-3 16.5-9 22.4L322.7 383.6c-11.9 12.5-31.3 12.5-43.2 0-11.9-12.5-11.9-32.7 0-45.2l48.2-50.4h-217c-17 0-30.7-14.3-30.7-32s13.7-32 30.6-32h217l-48.2-50.4c-11.9-12.5-11.9-32.7 0-45.2 12-12.5 31.3-12.5 43.3 0z" fill="#fff"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>
<!--    -->



    <p><strong>Год выпуска:</strong> <span th:text="${moviePage.year}">Год выпуска</span></p>


</main>
<!--import footer-->
<div th:replace="~{fragments/footer.html :: footer}"></div>

<script src="../static/js/moviPage.js"></script>

</body>
</html>
